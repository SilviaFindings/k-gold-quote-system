# K金产品报价计算表 - 本地运行指南

## 项目简介

这是一个基于Next.js开发的K金产品报价计算表系统，支持：
- 产品信息录入和管理
- 价格自动计算（支持14K和18K金）
- Excel批量导入/导出
- 价格历史记录
- 数据备份和恢复
- 17个产品分类管理

## 环境要求

- **Node.js**: 版本 18.0 或更高
- **pnpm** 或 **npm**: 包管理工具

## 安装步骤

### 1. 安装 Node.js
访问 [https://nodejs.org/](https://nodejs.org/) 下载并安装 Node.js（推荐 LTS 版本）

### 2. 安装 pnpm（推荐）
```bash
npm install -g pnpm
```

或者使用 npm：
```bash
# 使用 npm 运行后续命令
```

### 3. 进入项目目录
```bash
cd <项目目录>
```

### 4. 安装依赖
```bash
pnpm install
# 或
npm install
```

### 5. 运行开发服务器
```bash
pnpm dev
# 或
npm run dev
```

### 6. 访问应用
打开浏览器访问：http://localhost:5000

## 生产环境部署

### 1. 构建项目
```bash
pnpm build
# 或
npm run build
```

### 2. 启动生产服务器
```bash
pnpm start
# 或
npm start
```

## 项目结构

```
.
├── src/
│   └── app/
│       └── quote/
│           └── page.tsx        # 主要报价计算页面
├── public/                     # 静态资源目录
├── package.json                # 项目依赖配置
├── tsconfig.json               # TypeScript配置
├── tailwind.config.ts          # Tailwind CSS配置
└── next.config.ts              # Next.js配置
```

## 核心功能说明

### 1. 产品分类管理
- 17个预设产品分类
- 支持按分类筛选查看
- 每个分类显示产品数量

### 2. 产品录入
- 输入货号、名称、规格
- 设置重量和人工成本
- 选择金种（14K/18K）
- 自动计算批发价和零售价

### 3. Excel导入
- 支持批量导入产品
- 智能识别列名称
- 可选择是否导入重量和人工成本
- 自动跳过已存在的货号

### 4. Excel导出
- 按货号横向展开
- 支持批发价、零售价导出
- 已删除的产品不导出

### 5. 价格计算公式
```
材料成本 = 金价 × 重量 × 金种系数 × 材料损耗系数 × 材料费用系数
人工费用 = 人工成本 × 人工费用系数

批发价 = (材料成本 + 人工费用) × 利润系数 / 汇率
零售价 = (材料成本 + 人工费用 × 零售倍数) / 汇率
```

### 6. 数据管理
- 自动保存到浏览器 localStorage
- 支持数据备份导出（JSON格式）
- 支持从备份恢复数据
- 批量修复产品分类

## 常见问题

### Q: 数据存储在哪里？
A: 数据保存在浏览器的 localStorage 中，清除浏览器数据会丢失所有数据，请定期导出备份。

### Q: 如何备份和恢复数据？
A: 点击"数据管理"区域的"导出备份"按钮下载数据，恢复时点击"恢复数据"上传备份文件。

### Q: 导入Excel后看不到产品？
A: 检查产品分类是否正确，点击顶部的分类按钮切换到有数据的分类。

### Q: 价格系数如何设置？
A: 点击"价格系数配置"展开面板，根据实际需求调整各项系数。

### Q: 批发价和零售价显示的是什么货币？
A: 显示的是加币（CAD），金价和人工成本输入的是人民币（¥），计算时会自动转换汇率。

## 技术栈

- **前端框架**: Next.js 16 (App Router)
- **UI库**: React 19
- **样式**: Tailwind CSS 4
- **语言**: TypeScript 5
- **Excel处理**: xlsx

## 注意事项

1. **数据安全**: 定期导出数据备份
2. **浏览器兼容**: 建议使用现代浏览器（Chrome、Edge、Firefox）
3. **网络要求**: 纯前端应用，无需网络连接
4. **性能建议**: 产品数量过多时，建议定期清理不需要的历史记录

## 许可证

本项目仅供个人或内部使用。

## 支持

如有问题或建议，请联系开发者。
