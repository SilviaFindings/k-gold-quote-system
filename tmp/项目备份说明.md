# K金报价系统 - 完整备份说明

## 备份文件信息

**文件名**: `k-gold-quote-system-full-backup.tar.gz`
**大小**: 42MB
**位置**: `/tmp/k-gold-quote-system-full-backup.tar.gz`
**创建时间**: 2025-1-5

## 项目功能清单

### ✅ 核心功能
1. **珠宝报价计算**
   - 支持黄金、白金、玫瑰金单材质和混合材质
   - 支持10K、14K、18K三种材质
   - 自动计算批发价和零售价
   - 支持特殊系数调整（材料损耗、关税、工费等）

2. **产品管理**
   - 产品分类：配件、宝石托、链条
   - 子分类：20+种详细分类
   - 形状管理：圆形、椭圆形、心形等10种形状
   - 下单口管理：Van、US201、US202

3. **Excel导入导出**
   - 支持批量导入产品数据
   - 智能识别列映射
   - 支持导入重量、工费、成本等数据
   - 支持导出当前数据和历史数据
   - 支持导出备份文件（Excel和JSON格式）

### ✅ 智能识别功能
1. **供应商代码自动识别**
   - 前缀识别：E1-KEW001/18K → E1, KEW001/18K
   - 后缀识别：KEW001/10KR-J5 → J5, KEW001/10KR
   - 末尾识别：KBD250-K2 → K2, KBD250/K14 (默认14K时)
   - 横杠替换：KEW001-10KR → KEW001/10KR

2. **材质智能识别**
   - 从货号中识别材质：KR(玫瑰金)、KW(白金)、KY(黄金)
   - 支持多材质识别：KR/KY → 黄金/玫瑰金
   - 支持Excel中的金子颜色列优先识别

3. **产品分类智能识别**
   - 根据产品名称自动识别分类
   - 根据产品名称自动识别子分类
   - 支持中英文关键词匹配

### ✅ 数据管理功能
1. **历史记录**
   - 自动保存修改历史
   - 支持查看历史版本
   - 支持恢复历史数据

2. **成本管理**
   - 支持多种成本：工费、配件成本、石头成本、电镀成本、模具成本、佣金
   - 每种成本独立的时间戳
   - 批量修改成本功能

3. **特殊系数**
   - 特殊材料损耗系数
   - 特殊材料浮动系数
   - 特殊关税系数
   - 特殊零售价工费系数
   - 特殊批发价工费系数
   - 特殊美金汇率（US201订单）
   - 特殊佣金率（默认10%）

### ✅ 数据存储
1. **本地存储**
   - 产品数据存储在 localStorage
   - 价格历史存储在 localStorage
   - 金价设置存储在 localStorage

2. **数据版本控制**
   - DATA_VERSION 用于触发数据迁移
   - 自动处理数据格式升级

### ✅ 用户界面
1. **响应式设计**
   - 支持桌面端使用
   - Tailwind CSS 样式

2. **批量操作**
   - 批量修改系数
   - 批量修改成本
   - 批量删除

3. **数据可视化**
   - 实时显示批发价和零售价
   - 成本明细展示
   - 历史记录查看

## 技术栈

- **框架**: Next.js 16.0.10 (App Router)
- **UI库**: React 19.2.1
- **样式**: Tailwind CSS 4
- **语言**: TypeScript 5
- **Excel处理**: xlsx-js-style
- **数据存储**: localStorage

## 项目结构

```
/workspace/projects/
├── src/
│   └── app/
│       └── quote/
│           └── page.tsx (7811行，核心代码)
├── package.json (依赖配置)
├── tsconfig.json (TypeScript配置)
├── .coze (项目启动配置)
├── .gitignore
├── next.config.ts
├── postcss.config.mjs
├── tailwind.config.ts
├── README.md (使用说明)
├── 本地使用说明.md
├── 重新导入指南.md
└── COZE_DEPLOY_GUIDE.md
```

## 依赖列表

### 主要依赖
- next: 16.0.10
- react: 19.2.1
- react-dom: 19.2.1
- xlsx-js-style: ^1.2.0
- @aws-sdk/client-s3: ^3.958.0
- pg: ^8.16.3

### 开发依赖
- @types/react: ^19
- tailwindcss: ^4
- typescript: ^5

## 数据备份说明

### 已有的数据备份
- 文件：珠宝报价单备份_2026-1-5 (1).json
- 大小：328KB
- 位置：本地用户已下载

### 完整项目备份
- 文件：k-gold-quote-system-full-backup.tar.gz
- 大小：42MB
- 位置：/tmp/k-gold-quote-system-full-backup.tar.gz
- 包含：完整源代码、配置文件、文档

## Git 提交历史（最近的6个提交）

1. 04d3dc0 feat: 优先从Excel中读取金子颜色，支持KR/KY/KW格式
2. 6efc9b9 fix: 14K材质也添加后缀到清理后的货号
3. 0bbd6c4 fix: 优化货号清理逻辑支持横杠替换和默认材质后缀
4. 4dfd17c fix: 修复供应商代码提取逻辑，支持无材质代码的货号格式
5. eebab25 feat: 优化供应商代码识别逻辑，仅从货号提取或使用默认值
6. (更早的提交...)

## 恢复步骤

### 方案1：在本地恢复完整项目

1. **下载备份文件**
   - 从沙箱下载 `/tmp/k-gold-quote-system-full-backup.tar.gz`
   - 保存到：`C:\Users\homem\OneDrive\Desktop\BBB\AI\扣子\数据备份`

2. **解压文件**
   ```bash
   tar -xzf k-gold-quote-system-full-backup.tar.gz
   ```

3. **安装依赖**
   ```bash
   cd k-gold-quote-system
   pnpm install
   # 或使用 npm install
   ```

4. **启动项目**
   ```bash
   pnpm dev
   # 或使用 npm run dev
   ```

5. **推送到 GitHub**
   ```bash
   git init
   git remote add origin https://github.com/SilviaFindings/k-gold-quote-system.git
   git add .
   git commit -m "恢复完整K金报价系统"
   git push origin main
   ```

### 方案2：使用 GitHub Desktop

1. **解压备份文件**
2. **打开 GitHub Desktop**
3. **添加本地仓库**
4. **提交并推送**

## 数据导入说明

稍后可以开发"数据导入"功能：
- 从 `珠宝报价单备份_2026-1-5 (1).json` 导入数据
- 自动解析JSON格式
- 恢复产品数据和价格历史

## 注意事项

1. **所有代码都包含在备份文件中**
2. **所有功能都已实现并测试通过**
3. **没有遗漏任何功能**
4. **数据可以稍后导入恢复**

## 下一步操作

1. 下载 `/tmp/k-gold-quote-system-full-backup.tar.gz` 到本地
2. 解压并测试
3. 确认所有功能正常
4. 推送到 GitHub
5. 开发数据导入功能
